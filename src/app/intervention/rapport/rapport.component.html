
<div class="row">
    <!--end col-->

       <div class="col-lg-12">
           <div class="card">
               <div class="card-body">
                <div class="card-body invoice-head"> 
                    <h4 class="mt-0 header-title" style="margin:55px 0;color: rgb(210, 30, 30);text-align: center;">Liste des piéces demandé</h4>

                </div>

            
                <div class="row">
                       
                    <div class="col-md-12">
        
                            <div class="pagination justify-content-end">
                               <div class="d-flex flex-row-reverse bd-highlight mb-2">
                                  <div class="p-2 bd-highlight">
                                    <select (change)="onTableSizeChange($event)" class="custom-select">
                                      <option *ngFor="let size of tableSizes" [ngValue]="size">
                                        {{ size }}
                                      </option>
                                    </select>
                                  </div>
                                </div> 
                              </div>
        
                    </div>
                    </div>


                <div class="col-sm-12"  *ngFor="let demande of Demandepiece of sortData | paginate : {itemsPerPage: tableSize,currentPage: page,totalItems: count }; ">
                    <div class="card-block">
                        <ul >
                        <li  style="font-weight: bold; font-size: 16px;">Le technicien <code style="font-size:17px;font-weight: bolder;">{{demande.intervention.ordreintervention.technicien.nom}}{{demande.intervention.ordreintervention.technicien.prenom}} </code> a été déclaré pour l'intervention de <code style="font-size:17px;font-weight: bolder;">{{demande.intervention.date_debut |date: 'MM-dd-yyyy HH:mm' }}</code> les piéces suivante :
                            <span *ngIf="demande.intervention.etat === 'en attente des pieces'"  class="ml-3" style="color:rgb(245, 244, 236);background-color: #eeee0b;" >En attente des pieces!</span>
                            <span *ngIf="demande.intervention.etat != 'en attente des pieces'"  class="ml-3" style="color:rgb(245, 244, 236);background-color: #09e553;" >Valider</span>  
                            <span style="color:rgb(255, 0, 0);" class="ml-3"  type="button" (click)="printdemandepiece(demande.intervention.id)">Imprimer</span> 
                        </li>
                        </ul>

                        <div class="table-responsive">
                            <table class="table mb-0 table-centered">
                                <thead>
                                <tr style=" background-color: #dbe6fd;
                                color: white;">
                                    <th scope="col" style="color: rgb(10, 9, 9)">Image</th>
                                    <th scope="col" style="color: rgb(10, 9, 9)">Quantité</th>
                                    <th scope="col" style="color: rgb(10, 9, 9)">Piéce</th>
                                    <th scope="col" style="color: rgb(10, 9, 9)">Réference</th>
                                   
                                </tr>
                                </thead>
                                <tbody>
                                <tr  *ngFor="let piece of demande.list">
                                    <td><img  id="image"  src ="http://127.0.0.1:1337/images/{{piece.piece.image}}"  alt="image" class="img-fluid" class="rounded-circle thumb-sm mr-1">
                                    </td>
                                    <td>{{piece.quantite}}</td>
                                    <td>{{piece.piece.nom_piece}}</td>
                                    <td> {{piece.piece.ref_piece}}</td>
                                    
                                </tr>
                                </tbody>
                            </table>
                        </div>

                  

                            
                        </div>
          
          
 </div>
 <div class="row" >
    <div class="col-xl-2 mb-3">
    </div>
    <div class="col-xl-6 mb-3">
   <div class="d-flex justify-content-center">
    <pagination-controls  previousLabel="Précédent"  nextLabel="Suivant" (pageChange)="onTableDataChange($event)">
    </pagination-controls>
</div>
</div>
</div>

</div>
</div>
</div>
</div>
